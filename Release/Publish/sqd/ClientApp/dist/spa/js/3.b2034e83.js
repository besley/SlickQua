(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{1155:function(t,e,a){"use strict";a("76a1")},"5b5f":function(t,e,a){},"76a1":function(t,e,a){},"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hHh lpr fFf"}},[a("q-drawer",{attrs:{side:"left",bordered:""},model:{value:t.left,callback:function(e){t.left=e},expression:"left"}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.leftTab,callback:function(e){t.leftTab=e},expression:"leftTab"}},[a("q-tab",{attrs:{icon:"basic",name:"basic",label:t.ui.basic}}),a("q-tab",{attrs:{icon:"advanced",name:"advanced",label:t.ui.advanced}})],1),a("q-tab-panels",{attrs:{animated:""},model:{value:t.leftTab,callback:function(e){t.leftTab=e},expression:"leftTab"}},[a("q-tab-panel",{attrs:{name:"basic"}},[a("q-list",t._l(t.uiControlSimple,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.type,staticClass:"droppable-element",attrs:{clickable:"",ctrltype:e.type,draggable:"true",unselectable:"on"},on:{drag:t.dragstart,dragend:t.dragend}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{rounded:"","text-color":"black",icon:e.icon}})],1),a("q-item-section",[t._v(t._s(e.title))])],1)})),1)],1),a("q-tab-panel",{attrs:{name:"advanced"}},[a("q-list",t._l(t.uiControlComplex,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.type,staticClass:"droppable-element",attrs:{clickable:"",ctrltype:e.type,draggable:"true",unselectable:"on"},on:{drag:t.dragstart,dragend:t.dragend}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{rounded:"","text-color":"black",icon:e.icon}})],1),a("q-item-section",[t._v(t._s(e.title))])],1)})),1)],1)],1)],1),a("q-page-container",[a("div",{attrs:{id:"elementContainerRight"}},[a("grid-layout",{ref:"gridlayout",attrs:{layout:t.layout,"col-num":t.colNum,"row-height":40,"is-draggable":!0,"is-resizable":!1,"is-mirrored":!1,"vertical-compact":!1,"auto-size":!0,margin:[10,10],"use-css-transforms":!0},on:{"update:layout":function(e){t.layout=e}}},t._l(t.layout,(function(e){return a("grid-item",{key:e.uuid,staticClass:"compSelf",attrs:{x:e.x,y:e.y,w:e.w,h:e.h,i:e.i}},[a(e.c,{ref:"myChildComponent",refInFor:!0,tag:"component",attrs:{uuid:e.uuid},nativeOn:{click:function(a){return t.onComponentClick(e)}}}),a("div",{staticClass:"editComp"},[a("q-btn",{attrs:{dense:"",round:"",color:"red",icon:"delete"},on:{click:function(a){return t.onComponentDelete(e)}}})],1)],1)})),1)],1)]),a("q-page-container",{ref:"refPropertyContainer"})],1)},l=[],n=a("ded3"),o=a.n(n),r=a("1157"),s=a.n(r),d=a("9612"),c=a("b76a"),u=a.n(c),m=a("f82d"),p=a("4d69"),y=a("480a"),b=a("ce88"),f=a("0d35"),h=a("113d"),v=a("1258"),g=a("2ae1"),x=a("0b4a"),T=a("0446"),F=a("6b0f"),C=a("0cf0"),E=a("ff7b2"),D=a("18df"),q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin",staticStyle:{"max-width":"800px",width:"800px"}},[a("q-card-section",{staticStyle:{height:"900px"}},[a("h5",[t._v(t._s(t.ui.controlproperty))]),a("q-page",[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("q-input",{attrs:{filled:"",type:"text",label:t.ui.fieldtitle,"lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"Please type title"}]},model:{value:t.fieldcontrol.FieldName,callback:function(e){t.$set(t.fieldcontrol,"FieldName",e)},expression:"fieldcontrol.FieldName"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.description},model:{value:t.fieldcontrol.Description,callback:function(e){t.$set(t.fieldcontrol,"Description",e)},expression:"fieldcontrol.Description"}})],1),a("q-tabs",{staticClass:"bg-primary text-white shadow-2",attrs:{dense:"","indicator-color":"yellow",align:"left","narrow-indicator":""},model:{value:t.rightTab,callback:function(e){t.rightTab=e},expression:"rightTab"}},[t.showPropertyTabs("tabControlVar")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabControlVar",label:t.ui.input,icon:"grading"}}):t._e(),t.showPropertyTabs("tabDataSource")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabDataSource",label:t.ui.datasource,icon:"dns"}}):t._e(),t.showPropertyTabs("tabBindingEvent")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabBindingEvent",label:t.ui.event,icon:"task_alt"}}):t._e(),t.showPropertyTabs("tabButtonSetting")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabButtonSetting",label:t.ui.buttonsetting,icon:"playlist_play"}}):t._e(),t.showPropertyTabs("tabHyperLink")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabHyperLink",label:t.ui.hyperlink,icon:"url"}}):t._e(),t.showPropertyTabs("tabUploader")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabUploader",label:t.ui.uploader,icon:"upload"}}):t._e(),t.showPropertyTabs("tabSlider")?a("q-tab",{staticClass:"tab-item",attrs:{name:"tabSlider",label:t.ui.slider,icon:"settings_ethernet"}}):t._e()],1),a("q-tab-panels",{attrs:{animated:""},model:{value:t.rightTab,callback:function(e){t.rightTab=e},expression:"rightTab"}},[a("q-tab-panel",{attrs:{name:"tabControlVar"}},[a("q-checkbox",{attrs:{label:t.ui.mandatory},model:{value:t.fieldcontrol.IsMandatory,callback:function(e){t.$set(t.fieldcontrol,"IsMandatory",e)},expression:"fieldcontrol.IsMandatory"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.conditionkey},model:{value:t.fieldcontrol.ConditionKey,callback:function(e){t.$set(t.fieldcontrol,"ConditionKey",e)},expression:"fieldcontrol.ConditionKey"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.variablename},model:{value:t.fieldcontrol.VariableName,callback:function(e){t.$set(t.fieldcontrol,"VariableName",e)},expression:"fieldcontrol.VariableName"}})],1),a("q-tab-panel",{attrs:{name:"tabDataSource"}},[a("q-select",{attrs:{filled:"",options:t.datasource.options,"option-value":"value","option-label":"label","emit-value":"","map-options":"",label:t.ui.datasourcetype},on:{input:t.onDataSourceTypeChanged},model:{value:t.fieldcontrol.DataSourceType,callback:function(e){t.$set(t.fieldcontrol,"DataSourceType",e)},expression:"fieldcontrol.DataSourceType"}}),a("q-tabs",{staticClass:"bg-grey-2 text-teal",attrs:{animated:"",dense:"",align:"left"},model:{value:t.dataEntryTab,callback:function(e){t.dataEntryTab=e},expression:"dataEntryTab"}},[t.dataentry.showOptionsTab?a("q-tab",{attrs:{name:"tabCustomized",icon:"toc",label:t.ui.datasourceOptions}}):t._e(),t.dataentry.showDataEntryTab?a("q-tab",{attrs:{name:"tabEntryInfo",icon:"alarm",label:t.ui.datasourceEntryInfo}}):t._e(),t.dataentry.showCascadeFieldTab?a("q-tab",{attrs:{name:"tabCascadeField",icon:"movie",label:t.ui.datasourceCascadeField}}):t._e()],1),a("q-tab-panels",{attrs:{animated:""},model:{value:t.dataEntryTab,callback:function(e){t.dataEntryTab=e},expression:"dataEntryTab"}},[a("q-tab-panel",{attrs:{name:"tabCustomized"}},[a("q-input",{attrs:{label:t.ui.dataentryOptions,filled:"",type:"textarea"},model:{value:t.fieldcontrol.DataEntityOptions,callback:function(e){t.$set(t.fieldcontrol,"DataEntityOptions",e)},expression:"fieldcontrol.DataEntityOptions"}})],1),a("q-tab-panel",{attrs:{name:"tabEntryInfo"}},[a("q-input",{attrs:{filled:"",type:"text",label:t.ui.dataentityname},model:{value:t.fieldcontrol.DataEntityName,callback:function(e){t.$set(t.fieldcontrol,"DataEntityName",e)},expression:"fieldcontrol.DataEntityName"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.datavaluefield},model:{value:t.fieldcontrol.DataValueField,callback:function(e){t.$set(t.fieldcontrol,"DataValueField",e)},expression:"fieldcontrol.DataValueField"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.datatextfield},model:{value:t.fieldcontrol.DataTextField,callback:function(e){t.$set(t.fieldcontrol,"DataTextField",e)},expression:"fieldcontrol.DataTextField"}})],1),a("q-tab-panel",{attrs:{name:"tabCascadeField"}},[a("q-select",{attrs:{filled:"",options:t.datasource.cascadecontrolList,"option-value":"FieldCode","option-label":"FieldName","emit-value":"","map-options":"",label:t.ui.cascadeControlList},model:{value:t.fieldcontrol.CascadeControlCode,callback:function(e){t.$set(t.fieldcontrol,"CascadeControlCode",e)},expression:"fieldcontrol.CascadeControlCode"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.cascadeFieldName},model:{value:t.fieldcontrol.CascadeFieldName,callback:function(e){t.$set(t.fieldcontrol,"CascadeFieldName",e)},expression:"fieldcontrol.CascadeFieldName"}})],1)],1)],1),a("q-tab-panel",{attrs:{name:"tabBindingEvent"}},[a("q-select",{attrs:{filled:"",options:t.event.Options,"emit-value":"","map-options":"",label:t.ui.eventName},model:{value:t.event.Entity.EventName,callback:function(e){t.$set(t.event.Entity,"EventName",e)},expression:"event.Entity.EventName"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.eventArguments},model:{value:t.event.Entity.EventArguments,callback:function(e){t.$set(t.event.Entity,"EventArguments",e)},expression:"event.Entity.EventArguments"}}),a("q-input",{attrs:{label:t.ui.commandtext,filled:"",type:"textarea"},model:{value:t.event.Entity.CommandText,callback:function(e){t.$set(t.event.Entity,"CommandText",e)},expression:"event.Entity.CommandText"}}),a("q-checkbox",{attrs:{label:t.ui.eventDisabled},model:{value:t.event.Entity.IsDisabled,callback:function(e){t.$set(t.event.Entity,"IsDisabled",e)},expression:"event.Entity.IsDisabled"}}),a("div",{staticClass:"row"},[a("q-btn",{attrs:{icon:"save",color:"primary"},on:{click:t.onEventSave}}),a("q-btn",{attrs:{icon:"delete",color:"orange"},on:{click:t.onEventDelete}})],1),a("q-table",{attrs:{title:"",data:t.event.EventList,columns:t.event.Columns,"row-key":"ID",selection:"single",selected:t.event.selected,prefix:"eventlist"},on:{"update:selected":function(e){return t.$set(t.event,"selected",e)},"row-click":t.onEventRowClick}})],1),a("q-tab-panel",{attrs:{name:"tabButtonSetting"}},[a("q-input",{attrs:{filled:"",type:"text",label:t.ui.color},model:{value:t.controlstyle.Color,callback:function(e){t.$set(t.controlstyle,"Color",e)},expression:"controlstyle.Color"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.icon},model:{value:t.controlstyle.Icon,callback:function(e){t.$set(t.controlstyle,"Icon",e)},expression:"controlstyle.Icon"}})],1),a("q-tab-panel",{attrs:{name:"tabHyperLink"}},[a("q-input",{attrs:{filled:"",type:"text",label:t.ui.color},model:{value:t.controlstyle.Color,callback:function(e){t.$set(t.controlstyle,"Color",e)},expression:"controlstyle.Color"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.icon},model:{value:t.controlstyle.Icon,callback:function(e){t.$set(t.controlstyle,"Icon",e)},expression:"controlstyle.Icon"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.url},model:{value:t.controlstyle.Url,callback:function(e){t.$set(t.controlstyle,"Url",e)},expression:"controlstyle.Url"}})],1),a("q-tab-panel",{attrs:{name:"tabUploader"}},[a("q-input",{attrs:{filled:"",type:"text",label:t.ui.filetype},model:{value:t.controlstyle.FileType,callback:function(e){t.$set(t.controlstyle,"FileType",e)},expression:"controlstyle.FileType"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.filesize},model:{value:t.controlstyle.FileSize,callback:function(e){t.$set(t.controlstyle,"FileSize",e)},expression:"controlstyle.FileSize"}}),a("div",[t._v("\n              Notes: 1) FileType format examples: image/png.(mediatype/extension)\n              2)FileSize 10240000=10M\n            ")])],1),a("q-tab-panel",{attrs:{name:"tabSlider"}},[a("q-input",{attrs:{filled:"",type:"text",label:t.ui.maxslider},model:{value:t.controlstyle.MaxSlider,callback:function(e){t.$set(t.controlstyle,"MaxSlider",e)},expression:"controlstyle.MaxSlider"}}),a("q-input",{attrs:{filled:"",type:"text",label:t.ui.minslider},model:{value:t.controlstyle.MinSlider,callback:function(e){t.$set(t.controlstyle,"MinSlider",e)},expression:"controlstyle.MinSlider"}})],1)],1)],1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:t.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"Cancel"},on:{click:t.onCancelClick}})],1)],1)],1)},I=[],k=(a("498a"),a("00a0")),G=a("2f62"),w=a("0891"),$={name:"Field",props:["attr"],created(){var t=this;this.datasource.options=k["a"].datasourceTypeList;var e={FormID:this.attr.FormID,callback:function(e){1===e.Status?t.datasource.cascadecontrolList=e.Entity:console.log(e.Message)}};this.getFieldList(e)},mounted(){this.renderPageControl()},data(){return{rightTab:"",fieldcontrol:{FieldName:"",Description:"",IsMandatory:!1,ConditionKey:"",VariableName:""},controlstyle:{Color:"",Icon:"",FileType:"",FileSize:""},datasource:{datasourcetype:"",options:[],cascadecontrolList:[]},dataEntryTab:"",dataentry:{showOptionsTab:!1,showDataEntryTab:!1,showCascadeFieldTab:!1,options:null},event:{Entity:{EventName:"",EventCommandText:"",EventDisabled:!1},Options:k["a"].eventTypeList,seelcted:null,EventList:[],Columns:[{name:"eventID",label:"ID",align:"left",field:"ID"},{name:"eventName",label:this.gmxGetTitle("eventName"),align:"left",field:"EventName"},{name:"eventArguments",label:this.gmxGetTitle("eventArguments"),align:"left",field:"EventArguments"},{name:"isDisabled",label:this.gmxGetTitle("eventDisabled"),align:"left",field:"IsDisabled"}]},ui:{title:this.gmxGetTitle("title"),controlproperty:this.gmxGetTitle("controlproperty"),fieldtitle:this.gmxGetTitle("fieldtitle"),description:this.gmxGetTitle("description"),placeholder:this.gmxGetTitle("placeholder"),input:this.gmxGetTitle("input"),mandatory:this.gmxGetTitle("mandatory"),variablename:this.gmxGetTitle("variablename"),conditionkey:this.gmxGetTitle("conditionkey"),datasource:this.gmxGetTitle("datasource"),datasourcetype:this.gmxGetTitle("datasourcetype"),datasourceOptions:this.gmxGetTitle("datasourceOptions"),datasourceEntryInfo:this.gmxGetTitle("datasourceEntryInfo"),dataentityname:this.gmxGetTitle("dataentityname"),datavaluefield:this.gmxGetTitle("datavaluefield"),datatextfield:this.gmxGetTitle("datatextfield"),datasourceCascadeField:this.gmxGetTitle("datasourceCascadeField"),dataentryOptions:this.gmxGetTitle("dataentryOptions"),cascadeControlList:this.gmxGetTitle("cascadeControlList"),cascadeFieldName:this.gmxGetTitle("cascadeFieldName"),event:this.gmxGetTitle("event"),eventName:this.gmxGetTitle("eventName"),eventArguments:this.gmxGetTitle("eventArguments"),commandtext:this.gmxGetTitle("commandtext"),eventDisabled:this.gmxGetTitle("eventDisabled"),buttonsetting:this.gmxGetTitle("buttonsetting"),color:this.gmxGetTitle("color"),icon:this.gmxGetTitle("icon"),script:this.gmxGetTitle("script"),hyperlink:this.gmxGetTitle("hyperlink"),url:this.gmxGetTitle("url"),filetype:this.gmxGetTitle("filetype"),filesize:this.gmxGetTitle("filesize"),minslider:this.gmxGetTitle("minslider"),maxslider:this.gmxGetTitle("maxslider"),datagrid:this.gmxGetTitle("datagrid"),advanced:this.gmxGetTitle("advanced"),add:this.gmxGetTitle("add"),open:this.gmxGetTitle("open"),save:this.gmxGetTitle("save"),preview:this.gmxGetTitle("preview"),process:this.gmxGetTitle("process"),options:this.gmxGetTitle("options")}}},methods:o()(o()(o()({},Object(G["b"])("field",["getFieldByGUID","getFieldList","getFieldEventList","saveField","saveFieldEvent","deleteFieldEvent"])),Object(G["c"])("form",["currentForm"])),{},{showPropertyTabs(t){var e=this.attr.FieldType,a=k["a"].propertyTabs[e];return!(!a||-1===a.indexOf(t))&&(""===this.rightTab&&(this.rightTab=t),!0)},renderPageControl(){var t=this.attr,e={FormID:t.FormID,FieldGUID:t.FieldGUID},a=this,i={query:e,callback:function(e){if(1===e.Status){var i=e.Entity;if(null!==i){a.fieldcontrol=JSON.parse(JSON.stringify(i));var l=k["a"].setEmitFieldPropertyPageFunctionName(i.FieldType,i.FieldGUID);a.$root.$emit(l,i,a.fieldcontrol,a.controlstyle),a.onDataSourceTypeChanged(),a.loadFieldEventList(t.FormID,i.ID)}}else console.log(e.Message)}};this.getFieldByGUID(i)},saveFieldProperty(){var t=this,e=this.currentForm();if(null===e)return w["a"].warn(this.gmxGetTitle("Field.saveField.emptyform.warn")),!1;if(null===this.fieldcontrol.FieldName||""===this.fieldcontrol.FieldName.trim())return w["a"].warn(this.gmxGetTitle("Field.saveField.emptyfieldname.warn")),!1;var a=JSON.parse(JSON.stringify(this.fieldcontrol));a.FormID=e.ID,a.Version=e.Version,a.FieldGUID=this.attr.FieldGUID,a.FieldType=this.attr.FieldType;var i=k["a"].setEmitControlStyleFunctionName(a.FieldType,a.FieldGUID);this.$root.$emit(i,a,this.fieldcontrol,this.controlstyle);var l=k["a"].setEmitRenderContainerFunctionName(a.FieldType,a.FieldGUID);return t.$root.$emit(l,a),!0},onDataSourceTypeChanged(){var t=this.fieldcontrol.DataSourceType;"Customized"===t?(this.dataentry.showOptionsTab=!0,this.dataentry.showDataEntryTab=!1,this.dataentry.showCascadeFieldTab=!1,this.dataEntryTab="tabCustomized"):(this.dataentry.showOptionsTab=!1,this.dataentry.showDataEntryTab=!0,this.dataentry.showCascadeFieldTab=!0,this.dataEntryTab="tabEntryInfo")},loadFieldEventList(t,e){var a=this,i={query:{FormID:t,FieldID:e},callback:function(t){1===t.Status?a.event.EventList=t.Entity:w["a"].error(this.gmxGetTitle("Field.getFieldEventList.error"))}};this.getFieldEventList(i)},onEventSave(){var t={ID:this.event.Entity.ID,FormID:this.fieldcontrol.FormID,FieldID:this.fieldcontrol.ID,EventName:this.event.Entity.EventName,EventArguments:this.event.Entity.EventArguments,IsDisabled:this.event.Entity.IsDisabled,CommandText:this.event.Entity.CommandText};if(0!==t.FormID&&0!==t.FieldID){var e=this,a={event:t,callback:function(){e.loadFieldEventList(e.fieldcontrol.FormID,e.fieldcontrol.ID)}};this.saveFieldEvent(a)}else w["a"].warn(this.gmxGetTitle("Field.onEventSave.noneFormOrField.warn"))},onEventDelete(){var t=this;w["a"].confirm(this.gmxGetTitle("Field.onEventDelete.confirm"),(function(){var e=t.event.selected;if(1===e.length){var a=e[0],i={eventid:a.ID,callback:function(e){t.loadFieldEventList(t.fieldcontrol.FormID,t.fieldcontrol.ID)}};t.deleteFieldEvent(i)}else console.log("no selected")}))},onEventRowClick(){this.event.selected&&(this.event.Entity=this.event.selected[0])},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},onOKClick(){var t=this.saveFieldProperty();t&&(this.$emit("ok"),this.hide())},onCancelClick(){this.hide()}})},S=$,N=(a("f2c4"),a("2877")),L=a("24e8"),O=a("f09f"),_=a("a370"),P=a("9989"),Q=a("27f9"),M=a("429b"),U=a("7460"),z=a("adad"),B=a("823b"),A=a("8f8e"),V=a("ddd8"),R=a("9c40"),j=a("eaac"),H=a("4b7e"),J=a("eebe"),K=a.n(J),W=Object(N["a"])(S,q,I,!1,null,"f1c069ee",null),X=W.exports;K()(W,"components",{QDialog:L["a"],QCard:O["a"],QCardSection:_["a"],QPage:P["a"],QInput:Q["a"],QTabs:M["a"],QTab:U["a"],QTabPanels:z["a"],QTabPanel:B["a"],QCheckbox:A["a"],QSelect:V["a"],QBtn:R["a"],QTable:j["a"],QCardActions:H["a"]});var Y=a("7be8");const Z={x:null,y:null},tt={x:null,y:null,w:1,h:1,i:null};var et={name:"Index",computed:{uiControlSimple:function(){return k["a"].simpleControls},uiControlComplex:function(){return k["a"].complexControls}},components:{GridLayout:Y["GridLayout"],GridItem:Y["GridItem"],draggable:u.a,Property:X,Label:m["a"],Button:p["a"],Hyperlink:y["a"],Textbox:b["a"],Textarea:f["a"],EMail:h["a"],Dropdown:v["a"],List:g["a"],Radio:x["a"],Checkbox:T["a"],Date:F["a"],Time:C["a"],Slider:E["a"],Uploader:D["a"]},data(){return{left:!0,right:!0,simple:"simple",complex:"complex",leftTab:"basic",rightTab:"basic",colNum:12,ui:{basic:this.gmxGetTitle("basic"),advanced:this.gmxGetTitle("advanced")},layout:[]}},mounted(){document.addEventListener("dragover",(function(t){Z.x=t.clientX,Z.y=t.clientY}),!1),this.$root.$on("mainlayout-loadGridLayout",(t=>{this.loadGridLayout(t)})),this.$root.$on("mainlayout-saveGridLayout",(()=>{this.saveGridLayout()}))},methods:o()(o()(o()(o()({},Object(G["b"])("form",["getTemplate","SaveTemplateWithFieldList"])),Object(G["c"])("form",["currentForm","currentLayout"])),Object(G["b"])("field",["deleteComponent"])),{},{dragstart:function(t){var e=this.layout,a=s()(t.target).attr("ctrltype"),i=document.getElementById("elementContainerRight"),l=i.getBoundingClientRect(),n=this.isMouseInGrid(Z,l);if(!0===n&&-1===e.findIndex((t=>"drop"===t.i))){var o=Math.round(2*e.length%(this.colNum||12)*10/10),r=Math.round(10*(e.length+(this.colNum||12))/10),c={x:o,y:r,w:3,h:1,i:"drop",c:a,uuid:d["a"].v1()};e.push(c)}var u=this.layout.findIndex((t=>"drop"===t.i));if(-1!==u){try{this.$refs.gridlayout.$children[this.layout.length].$refs.item.style.display="none"}catch(y){}var m=this.$refs.gridlayout.$children[u];m.dragging={top:Z.y-l.top,lef:Z.x-l.left};var p=m.calcXY(Z.y-l.top,Z.x-l.left);!0===n&&(this.$refs.gridlayout.dragEvent("dragstart","drop",p.x,p.y,1,1),tt.i=this.getMaxIndexOfLayout(this.layout),tt.c=this.layout[u].c,tt.x=this.layout[u].x,tt.y=this.layout[u].y,tt.w=3,tt.h=1,tt.uuid=this.layout[u].uuid),!1===n&&(this.$refs.gridlayout.dragEvent("dragend","drop",p.x,p.y,1,1),this.layout=this.layout.filter((t=>"drop"!==t.i)))}},getMaxIndexOfLayout:function(t){var e=0;return s.a.each(t,(function(t,a){if("drop"!==a.i){var i=parseInt(a.i);i>e&&(e=i)}})),e+=1,e.toString()},dragend:function(t){var e=document.getElementById("elementContainerRight"),a=e.getBoundingClientRect(),i=this.isMouseInGrid(Z,a);if(!0===i){this.$refs.gridlayout.dragEvent("dragend","drop",tt.x,tt.y,1,1),this.layout=this.layout.filter((t=>"drop"!==t.i)),this.layout.push({x:tt.x,y:tt.y,w:3,h:1,i:tt.i,c:tt.c,uuid:tt.uuid}),this.$refs.gridlayout.dragEvent("dragend",tt.i,tt.x,tt.y,1,1);try{this.$refs.gridlayout.$children[this.layout.length].$refs.item.style.display="block"}catch(l){}}},onComponentClick:function(t){var e=this.currentForm(),a={FormID:null!==e?e.ID:0,FieldGUID:t.uuid,FieldType:t.c};this.$q.dialog({component:X,parent:this.$refs.refPropertyContainer,text:"PropertyPage",attr:a,style:"height: 400px; width: 800px !important; max-width:800px !important;"}).onOk((()=>{this.$router.push("/")})).onCancel((()=>{})).onDismiss((()=>{}))},onComponentDelete:function(t){var e=this;w["a"].confirm(this.gmxGetTitle("Form.onComponentDelete.confirm"),(function(){var a=t.uuid;if(null!==e.currentForm()){var i=e.currentForm().ID;if(0!==i&&""!==a){var l={query:{FormID:i,FieldGUID:a},callback:function(t){-1!==t.Status?e.layout=e.layout.filter((t=>!(t.uuid===a))):w["a"].error(e.gmxGetTitle("Form.onComponentDelete.error"),t.Message)}};e.deleteComponent(l)}else console.log("no component selected")}else e.layout=e.layout.filter((t=>!(t.uuid===a)))}))},isMouseInGrid:function(t,e){var a=!1;return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom&&(a=!0),a},loadGridLayout(t){var e=this,a={callback:function(a){null!==a&&(e.layout=a,setTimeout((function(){var a=t.Entity.FormFieldList;s.a.each(a,(function(t,a){var i=a.FieldType,l=k["a"].setEmitRenderContainerFunctionName(i,a.FieldGUID);e.$root.$emit(l,a)}))}),100))}};this.getTemplate(a)},saveGridLayout(){var t=this,e=[];s.a.each(this.layout,(function(a,i){var l=i.uuid,n=k["a"].gatherEmitFieldObjectFunctionName(i.c,l);t.$root.$emit(n,(function(t){null!==t&&e.push(t)}))}));var a=this.layout,i=this.currentForm();if(null!==i){var l={Form:{ID:i.ID,TemplateContent:JSON.stringify(a)},FormFieldList:e},n={Entity:l,callback:function(e){1===e.Status?w["a"].info(t.gmxGetTitle("Form.Template.Save.ok")):w["a"].error(t.gmxGetTitle("Form.Template.Save.error"),e.Message)}};this.SaveTemplateWithFieldList(n)}else w["a"].warn(this.gmxGetTitle("Form.Save.emptyform.warn"))}})},at=et,it=(a("1155"),a("4d5a")),lt=a("9404"),nt=a("1c1c"),ot=a("66e5"),rt=a("4074"),st=a("cb32"),dt=a("09e3"),ct=a("714f"),ut=Object(N["a"])(at,i,l,!1,null,"fbc39c22",null);e["default"]=ut.exports;K()(ut,"components",{QLayout:it["a"],QDrawer:lt["a"],QTabs:M["a"],QTab:U["a"],QTabPanels:z["a"],QTabPanel:B["a"],QList:nt["a"],QItem:ot["a"],QItemSection:rt["a"],QAvatar:st["a"],QPageContainer:dt["a"],QBtn:R["a"]}),K()(ut,"directives",{Ripple:ct["a"]})},f2c4:function(t,e,a){"use strict";a("5b5f")}}]);